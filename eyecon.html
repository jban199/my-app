<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=overlays-content">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TKA - EyeCon</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" sizes="any">
    <meta name="theme-color" content="#1A1A1A">

    <!-- Link to the stylesheet -->
    <link rel="stylesheet" href="styles.css">

</head>
<body>


<section id="tak-page-loader">
	<div class="tak-spinner"></div>
	<p>Loading...</p>
	
	<script>
		window.addEventListener('load', function () {
			const loader = document.getElementById('tak-page-loader');
			if (loader) {
				loader.classList.add('fade-out');
				setTimeout(() => {
					loader.style.display = 'none';
				}, 500); // match the CSS transition duration (0.5s)
			}
		});
	</script>
</section>




<section class="tak-header">
	<h1 class="tak-pagename"> EyeCon </h1>
</section>



<!-- EYE-CON Prank App Section -->
<section id="eyecon-prank-section">
<style>
  .eyecon-wrapper {
    max-width: 400px;
    margin: auto;
    border-radius: 12px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    height: 70vh;
  }

  .eyecon-video-area {
    flex: 1;
    display: flex;
    overflow: hidden;
    border-radius: 10px;
    background: #000;
    position: relative;
  }

  .eyecon-video {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  .eyecon-toggle-btn {
    margin: 4px auto 0;
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--bg3);
    color: var(--font1);
    padding: 6px 12px;
    border-radius: 30px;
    font-size: 14px;
    font-weight: 600;
    border: none;
    cursor: pointer;
  }
  
  .eyecon-toggle-btn svg {
	fill: var(--accent1);
  }

  .eyecon-bottom-row {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
  }

  .eyecon-person {
    flex: 1;
    border-radius: 8px;
    overflow: hidden;
    background: #000;
  }

  .eyecon-person video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .eyecon-stats {
    flex: 1;
    background: var(--bg2);
    border-radius: 8px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-size: 13px;
    gap: 4px;
  }

  .eyecon-stats .eyecon-row {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--font2);
  }

  .eyecon-stats .eyecon-row svg {
    fill: var(--accent1);
    width: 18px;
    height: 18px;
	opacity: 0.7;
  }

  .eyecon-location-btn {
    margin-top: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: var(--bg1);
    color: var(--font1);
    font-weight: bold;
    padding: 6px 10px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 13px;
    border: none;
    width: 100%;
  }

  .eyecon-location-btn svg {
    fill: var(--accent1);
    width: 18px;
    height: 18px;
  }
</style>

<div class="eyecon-wrapper">
  <div class="eyecon-video-area">
    <video id="eyecon-camera-video" class="eyecon-video" autoplay playsinline muted></video>
  </div>

  <button id="eyecon-toggle-btn" class="eyecon-toggle-btn">
    <!-- Switch Camera Icon -->
    <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
		<path d="M320-280q-33 0-56.5-23.5T240-360v-240q0-33 23.5-56.5T320-680h40l28-28q6-6 13.5-9t15.5-3h126q8 0 15.5 3t13.5 9l28 28h40q33 0 56.5 23.5T720-600v240q0 33-23.5 56.5T640-280H320Zm160-120q33 0 56.5-23.5T560-480q0-33-23.5-56.5T480-560q-33 0-56.5 23.5T400-480q0 33 23.5 56.5T480-400Zm0 400Q304 0 171.5-110.5T7-389q-3-17 6.5-31T40-436q17-2 30 8.5T86-400q26 131 124.5 219T444-82l-34-34q-11-11-11-28t11-28q11-11 28-11t28 11L598-40q7 7 4.5 16T591-13q-27 7-54.5 10T480 0Zm0-960q176 0 308.5 110T953-571q3 17-6.5 31T920-524q-17 2-30-8.5T874-560q-26-131-124.5-219T516-878l34 34q11 11 11 28t-11 28q-11 11-28 11t-28-11L362-920q-7-7-4.5-16t11.5-11q27-7 54.5-10t56.5-3Z"/>
	</svg>
    Switch Camera
  </button>

  <div class="eyecon-bottom-row">
    <div class="eyecon-person">
      <video src="https://www.w3schools.com/html/mov_bbb.mp4" autoplay muted loop playsinline></video>
    </div>
    <div class="eyecon-stats">
      <div class="eyecon-row">
        <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M160-120q-17 0-28.5-11.5T120-160q0-17 11.5-28.5T160-200h640q17 0 28.5 11.5T840-160q0 17-11.5 28.5T800-120H160Zm160-160q-17 0-28.5-11.5T280-320q0-17 11.5-28.5T320-360h320q17 0 28.5 11.5T680-320q0 17-11.5 28.5T640-280H320ZM160-440q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h640q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H160Zm160-160q-17 0-28.5-11.5T280-640q0-17 11.5-28.5T320-680h320q17 0 28.5 11.5T680-640q0 17-11.5 28.5T640-600H320ZM160-760q-17 0-28.5-11.5T120-800q0-17 11.5-28.5T160-840h640q17 0 28.5 11.5T840-800q0 17-11.5 28.5T800-760H160Z"/>
		</svg>
        <span id="eyecon-lat">—</span>
      </div>
      <div class="eyecon-row">
        <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M280-280v-400q0-17 11.5-28.5T320-720q17 0 28.5 11.5T360-680v400q0 17-11.5 28.5T320-240q-17 0-28.5-11.5T280-280Zm160 160v-720q0-17 11.5-28.5T480-880q17 0 28.5 11.5T520-840v720q0 17-11.5 28.5T480-80q-17 0-28.5-11.5T440-120ZM120-440v-80q0-17 11.5-28.5T160-560q17 0 28.5 11.5T200-520v80q0 17-11.5 28.5T160-400q-17 0-28.5-11.5T120-440Zm480 160v-400q0-17 11.5-28.5T640-720q17 0 28.5 11.5T680-680v400q0 17-11.5 28.5T640-240q-17 0-28.5-11.5T600-280Zm160-160v-80q0-17 11.5-28.5T800-560q17 0 28.5 11.5T840-520v80q0 17-11.5 28.5T800-400q-17 0-28.5-11.5T760-440Z"/>
		</svg>
        <span id="eyecon-long">—</span>
      </div>
      <div class="eyecon-row">
        <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M520-496v-144q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640v159q0 8 3 15.5t9 13.5l132 132q11 11 28 11t28-11q11-11 11-28t-11-28L520-496ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
		</svg>
        <span id="eyecon-time">--:--</span>
      </div>
      <div class="eyecon-row">
        <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93ZM320-360v-66q0-8 3-15.5t9-13.5l209-208q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q8 9 12.5 20t4.5 22q0 11-4 22.5T663-540L455-332q-6 6-13.5 9t-15.5 3h-66q-17 0-28.5-11.5T320-360Zm263-184 37-39-37-37-38 38 38 38Z"/>
		</svg>
        <span id="eyecon-status">Scanning...</span>
      </div>
      <button class="eyecon-location-btn" id="eyecon-loc-btn">
        <!-- Location Icon -->
        <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M480-107q-14 0-28-5t-25-15q-65-60-115-117t-83.5-110.5q-33.5-53.5-51-103T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 45-17.5 94.5t-51 103Q698-301 648-244T533-127q-11 10-25 15t-28 5Zm0-373q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Z"/>
		</svg>
        Enable Location
      </button>
    </div>
  </div>
</div>

<script>
  const eyeconVideo = document.getElementById('eyecon-camera-video');
  let eyeconUsingFront = true;
  let eyeconStream = null;

  async function eyeconStartCamera() {
    try {
      // Stop any existing stream before switching
      if (eyeconStream) {
        eyeconStream.getTracks().forEach(track => track.stop());
      }

      const constraints = {
        video: { facingMode: eyeconUsingFront ? 'user' : 'environment' },
        audio: false
      };

      eyeconStream = await navigator.mediaDevices.getUserMedia(constraints);
      eyeconVideo.srcObject = eyeconStream;

    } catch (err) {
      showTakSnackbar('Camera access denied or not available.');
      console.error('Camera error:', err);
    }
  }

  document.getElementById('eyecon-toggle-btn').onclick = () => {
    eyeconUsingFront = !eyeconUsingFront;
    eyeconStartCamera();
  };

  async function eyeconGetLocation() {
    try {
      const perm = await navigator.permissions.query({ name: 'geolocation' });
      if (perm.state === 'denied') {
        showTakSnackbar('Location permission denied');
        return;
      }

      navigator.geolocation.getCurrentPosition(pos => {
        document.getElementById('eyecon-lat').innerText = pos.coords.latitude.toFixed(4);
        document.getElementById('eyecon-long').innerText = pos.coords.longitude.toFixed(4);
      }, () => {
        showTakSnackbar('Unable to fetch location.');
      });
    } catch (e) {
      showTakSnackbar('Location not supported.');
    }
  }

  function eyeconUpdateTime() {
    const now = new Date();
    const timeStr = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
    document.getElementById('eyecon-time').innerText = timeStr;
  }

  document.getElementById('eyecon-loc-btn').onclick = eyeconGetLocation;
  eyeconStartCamera();
  eyeconUpdateTime();
  setInterval(eyeconUpdateTime, 1000);

  const statusMessages = ["Analyzing...", "Processing...", "Uploading...", "Scanning...", "Compiling..."];
  setInterval(() => {
    const msg = statusMessages[Math.floor(Math.random() * statusMessages.length)];
    document.getElementById('eyecon-status').innerText = msg;
  }, 3000);
</script>


</section>











<!-- Snackbar (hidden initially) -->
	<div id="tak-snackbar" class="tak-snackbar">Welcome!</div>

<script>
// Snackbar function
function showTakSnackbar(message = "Welcome!") {
  const snackbar = document.getElementById("tak-snackbar");
  snackbar.textContent = message;
  snackbar.style.display = "block";
  snackbar.style.opacity = "1";

  setTimeout(() => {
    snackbar.style.opacity = "0";
    setTimeout(() => {
      snackbar.style.display = "none";
    }, 300);
  }, 2000);
}
</script>






<!-- ///////////////// -->
<!-- Bottom Menu -->
<!-- ///////////////// -->
<section>
<!-- SBM Trigger -->
<svg id="SBM-Icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff">
    <path d="M86-191v-126h788v126H86Zm0-226v-126h788v126H86Zm0-226v-126h788v126H86Z"/>
</svg>

<!-- SBM container (empty, the content is injected here) -->
<div id="SBM-container"></div>
</section>


<script>
window.addEventListener("load", function () {		
    // Load SBM
    fetch('sbm.html')
        .then(response => response.text())
        .then(data => {
            const sidebarContainer = document.getElementById('SBM-container');
            sidebarContainer.innerHTML = data;

            // Make sure sidebar is hidden after load
            const overlaySBM = document.getElementById("SBM-section");
            if (overlaySBM) {
                overlaySBM.style.transform = "translateY(100%)";
            }

            // Reattach event listeners after the SBM is loaded
            const closeButton = document.getElementById("closeSBM");
            if (closeButton) {
                closeButton.addEventListener("click", closeSBM);
            }

            // Get reference to the icon that triggers the sidebar opening
            const SBMIcon = document.getElementById("SBM-Icon");

            // Function to open the sidebar
            function openSBM() {
                if (overlaySBM) {
                    overlaySBM.style.transform = "translateY(0)";
                }
            }

            // Function to close the sidebar
            function closeSBM() {
                if (overlaySBM) {
                    overlaySBM.style.transform = "translateY(100%)";
                }
            }

            // Event listener for opening the SBM when the icon is clicked
            if (SBMIcon) {
                SBMIcon.addEventListener("click", openSBM);
            }
        })
        .catch(error => {
            console.error("Error loading SBM:", error);
        });
});
</script>






<!-- ///////////////// -->
<!-- User Selected Accent Color -->
<!-- ///////////////// -->
<style id="theme-accent-style">
  :root {
	--accent1: #FD7E14; /* Default fallback accent */
  }
</style>
<script>
	(function theme_applyAccentFromStorage() {
	const savedAccent = localStorage.getItem('theme_accent');
	const accentStyle = document.getElementById('theme-accent-style');

	if (savedAccent && accentStyle) {
	  accentStyle.textContent = `:root { --accent1: ${savedAccent}; }`;
	}
	})();
</script>



<!-- ///////////////// -->
<!-- Theme Toggle -->
<!-- ///////////////// -->
<section>
<button id="theme-toggle">
    <!-- Default dark icon (SVG) -->
    <svg id="dark-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
      <path d="M480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z"/>
    </svg>

    <!-- Light Icon (hidden by default) -->
    <svg id="light-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="display: none;">
      <path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z"/>
    </svg>
</button>
</section>

<!-- ///////////////// -->
<!-- Set Theme - Based on Local Storage -->
<!-- ///////////////// -->
<script>
  // Wait for the DOM to be fully loaded before running the script
  document.addEventListener("DOMContentLoaded", function() {
    const themeLink = document.createElement("link");
    themeLink.rel = "stylesheet";
    themeLink.id = "theme-link";
    
    // Check if a theme preference is saved in localStorage
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      themeLink.href = "dark-theme.css";  // If dark theme is saved, load dark-theme.css
    } else if (savedTheme === "light") {
      themeLink.href = "light-theme.css"; // If light theme is saved, load light-theme.css
    } else {
      themeLink.href = "dark-theme.css";  // Default to dark theme if no preference is saved
      localStorage.setItem('theme', 'dark');  // Save preference
    }

    // Append the theme <link> tag to the <head> of the document
    document.head.appendChild(themeLink);

    // Initialize icons based on saved theme preference
    const darkIcon = document.getElementById('dark-icon');
    const lightIcon = document.getElementById('light-icon');

    if (savedTheme === "dark") {
      lightIcon.style.display = 'none';
      darkIcon.style.display = 'block';
    } else {
      lightIcon.style.display = 'block';
      darkIcon.style.display = 'none';
    }

    // Toggle theme when button is clicked
    const themeToggleButton = document.getElementById('theme-toggle');

    themeToggleButton.addEventListener('click', () => {
      const currentTheme = themeLink.href.includes('dark-theme.css') ? 'dark' : 'light';
      if (currentTheme === 'dark') {
        themeLink.href = 'light-theme.css';  // Switch to light theme
        localStorage.setItem('theme', 'light');  // Save preference
        lightIcon.style.display = 'block';  // Show light icon
        darkIcon.style.display = 'none';   // Hide dark icon
      } else {
        themeLink.href = 'dark-theme.css';   // Switch to dark theme
        localStorage.setItem('theme', 'dark');  // Save preference
        lightIcon.style.display = 'none';   // Hide light icon
        darkIcon.style.display = 'block';   // Show dark icon
      }
    });
  });
</script>



<!-- ///////////////// -->
<!-- Fullscreen Toggle -->
<!-- ///////////////// -->
<section>
  <button id="fullscreen-toggle" class="fullscreen-button">
  <!-- Icon for entering fullscreen (initially displayed) -->
  <svg id="fullscreen-enter-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
    <path d="M86-86v-260h126v134h134v126H86Zm529 0v-126h133v-134h126v260H615ZM86-615v-259h260v126H212v133H86Zm662 0v-133H615v-126h259v259H748Z"/>
  </svg>

  <!-- Icon for exiting fullscreen (hidden initially) -->
  <svg id="fullscreen-exit-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="display: none;">
    <path d="M220-86v-134H86v-126h260v260H220Zm395 0v-260h259v126H741v134H615ZM86-615v-126h134v-133h126v259H86Zm529 0v-259h126v133h133v126H615Z"/>
  </svg>
</button>
</section>
<script>
  // Fullscreen Toggle Logic
const fullscreenButton = document.getElementById('fullscreen-toggle');
fullscreenButton.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
    document.getElementById('fullscreen-enter-icon').style.display = 'none';
    document.getElementById('fullscreen-exit-icon').style.display = 'block';
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
      document.getElementById('fullscreen-enter-icon').style.display = 'block';
      document.getElementById('fullscreen-exit-icon').style.display = 'none';
    }
  }
});

</script>


<!-- ///////////////// -->
<!-- Prevent Right Click Context Menu -->
<!-- ///////////////// -->
<script>
  document.addEventListener('contextmenu', function(event) {
    const target = event.target;

    // Allow default context menu on input, textarea, or contenteditable elements
    if (
      target.tagName === 'INPUT' ||
      target.tagName === 'TEXTAREA' ||
      target.isContentEditable
    ) {
      return; // allow context menu
    }

    event.preventDefault(); // otherwise, block it
  });
</script>


<!-- ///////////////// -->
<!-- Capacitor Functions -->
<!-- ///////////////// -->
<script type="module" src="capacitorFunctions.js"></script>


</body>
</html>
