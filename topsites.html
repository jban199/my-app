<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=overlays-content">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tretagnikalaya</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" sizes="any">
    <meta name="theme-color" content="#000000">

    <!-- Link to the stylesheet -->
    <link rel="stylesheet" href="styles.css">

</head>
<body>

<div id="search-container">
    <div id="search-bar">
      <input type="text" id="search-input" placeholder="Search...">
      <button id="search-btn">
		<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
			<path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
		</svg>
	  </button>
    
		<div id="engine-select">
		  <div id="selected-engine" class="search-engine-icon" onclick="toggleDropdown()">
			<img id="selected-icon" src="images/icons/google.svg" alt="Google Icon">
		  </div>

		  <div id="dropdown" class="dropdown">
			<div class="dropdown-item" onclick="selectEngine('google', 'images/icons/google.svg')">
			  <img src="images/icons/google.svg" alt="Google Icon"> Google
			</div>
			<div class="dropdown-item" onclick="selectEngine('bing', 'images/icons/bing.svg')">
			  <img src="images/icons/bing.svg" alt="Bing Icon"> Bing
			</div>
			<div class="dropdown-item" onclick="selectEngine('yahoo', 'images/icons/yahoo.svg')">
			  <img src="images/icons/yahoo.svg" alt="Yahoo Icon"> Yahoo
			</div>
			<div class="dropdown-item" onclick="selectEngine('duckduckgo', 'images/icons/duckduckgo.svg')">
			  <img src="images/icons/duckduckgo.svg" alt="DuckDuckGo Icon"> DuckDuckGo
			</div>
			<div class="dropdown-item" onclick="selectEngine('youtube', 'images/icons/youtube.svg')">
			  <img src="images/icons/youtube.svg" alt="YouTube Icon"> YouTube
			</div>
			<div class="dropdown-item" onclick="selectEngine('wikipedia', 'images/icons/wikipedia.svg')">
			  <img src="images/icons/wikipedia.svg" alt="Wikipedia Icon"> Wikipedia
			</div>
		  </div>
		</div>
	</div>
</div>
  
<script>
// Function to toggle dropdown visibility
function toggleDropdown() {
  const dropdown = document.getElementById('dropdown');
  dropdown.classList.toggle('show');
}

// Function to select a search engine
function selectEngine(engine, icon) {
  // Update the selected icon
  document.getElementById('selected-icon').src = icon;

  // Save the selected engine to localStorage
  localStorage.setItem('preferredEngine', engine);

  // Close the dropdown
  toggleDropdown();
}

// Initialize the search engine preference on page load
document.addEventListener('DOMContentLoaded', () => {
  // Get the saved preference from localStorage
  let preferredEngine = localStorage.getItem('preferredEngine') || 'google';
  const engineIconMap = {
    google: 'images/icons/google.svg',
    bing: 'images/icons/bing.svg',
    yahoo: 'images/icons/yahoo.svg',
    duckduckgo: 'images/icons/duckduckgo.svg',
    youtube: 'images/icons/youtube.svg',
    wikipedia: 'images/icons/wikipedia.svg'
  };

  // Set the default icon based on the stored preference
  const selectedIcon = engineIconMap[preferredEngine] || 'google-icon.png';
  document.getElementById('selected-icon').src = selectedIcon;
});

// Function to handle search based on selected engine
document.getElementById('search-btn').addEventListener('click', () => {
  const query = document.getElementById('search-input').value.trim();
  let searchUrl = '';
  const selectedEngine = localStorage.getItem('preferredEngine') || 'google';

  if (query) {
    switch (selectedEngine) {
      case 'google':
        searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
        break;
      case 'bing':
        searchUrl = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
        break;
      case 'yahoo':
        searchUrl = `https://search.yahoo.com/search?p=${encodeURIComponent(query)}`;
        break;
      case 'duckduckgo':
        searchUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}`;
        break;
      case 'youtube':
        searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
        break;
      case 'wikipedia':
        searchUrl = `https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(query)}`;
        break;
    }
    window.open(searchUrl, '_blank'); // Open search in a new tab
  }
});

</script>


<!-- ///////////////// -->
<!-- Top Sites -->
<!-- ///////////////// -->
<div id="toplinks-container">
    <!-- Toplinks with default icons and names -->
    <div class="toplink" data-link="https://www.amazon.com" oncontextmenu="showDropdown(event, this)">
      <div class="icon"><img src="images/icons/amazon.svg" alt="Amazon"></div>
      <div class="name">Amazon</div>
    </div>
    <div class="toplink" data-link="https://www.google.com" oncontextmenu="showDropdown(event, this)">
      <div class="icon"><img src="images/icons/google.svg" alt="Google"></div>
      <div class="name">Google</div>
    </div>
    <div class="toplink" data-link="https://www.youtube.com" oncontextmenu="showDropdown(event, this)">
      <div class="icon"><img src="images/icons/youtube.svg" alt="YouTube"></div>
      <div class="name">YouTube</div>
    </div>
    <div class="toplink" data-link="https://www.facebook.com" oncontextmenu="showDropdown(event, this)">
      <div class="icon"><img src="images/icons/facebook.svg" alt="Facebook"></div>
      <div class="name">Facebook</div>
    </div>
    <div class="toplink plus-button" onclick="openModal()">
      <div class="icon"><img src="images/icons/addmore.svg" alt="Add Bookmark"></div>
      <div class="name">Add</div>
    </div>
  </div>

  <!-- Dropdown for Edit/Delete -->
  <div id="dropdown-menu" class="dropdown-menu">
    <ul>
      <li onclick="editLink()">Edit</li>
      <li onclick="deleteLink()">Delete</li>
    </ul>
</div>
<script>
// Handle long press with touch and mouse events
let longPressTimer;
let activeElement = null; // Store the active element for the long press

// Function to detect a long press
function startLongPress(event, element) {
  event.preventDefault();
  event.stopPropagation();

  activeElement = element;

  // Set a timer for long press (500ms)
  longPressTimer = setTimeout(() => {
    if (activeElement) {
      activeElement.classList.add('active'); // Show dropdown on long press
    }
  }, 500);
}

// Function to cancel the long press if the press is short
function cancelLongPress() {
  clearTimeout(longPressTimer);
  activeElement = null; // Reset the active element
}

// Show dropdown menu on long press (only if long press timer completes)
function showDropdown(event, element) {
  startLongPress(event, element); // Start long press
}

// Handle click event to remove active dropdown
document.addEventListener('click', () => {
  const activeLink = document.querySelector('.toplink.active');
  if (activeLink) {
    activeLink.classList.remove('active');
  }
  cancelLongPress(); // Reset long press timer
});

// Function to handle click on a link (opens the link in a new tab)
function handleClick(element) {
  const link = element.dataset.link;
  window.open(link, '_blank'); // Open the link in a new tab
  cancelLongPress(); // Reset long press timer on click
}

// Function to edit a link (for now, it just logs the action)
function editLink() {
  alert('Edit this link!');
  cancelLongPress(); // Reset long press timer
}

// Function to delete a link (removes the element)
function deleteLink() {
  const activeLink = document.querySelector('.toplink.active');
  if (activeLink) {
    activeLink.remove(); // Remove the clicked link
  }
  cancelLongPress(); // Reset long press timer
}

// Open modal for adding a new bookmark (for now, just an alert)
function openModal() {
  alert('Open modal to add a bookmark');
}

// Attach events to each toplink element
document.querySelectorAll('.toplink').forEach(link => {
  link.addEventListener('click', () => handleClick(link)); // Normal click event
  link.addEventListener('touchstart', (event) => startLongPress(event, link)); // Touch start (long press)
  link.addEventListener('touchend', cancelLongPress); // Touch end (reset long press)
  link.addEventListener('mousedown', (event) => startLongPress(event, link)); // Mouse down (long press)
  link.addEventListener('mouseup', cancelLongPress); // Mouse up (reset long press)
});

</script>



<!-- ///////////////// -->
<!-- Fixed Footer Menu -->
<!-- ///////////////// -->
<section>
<!-- FooterMenu container (empty, the content is injected here) -->
<div id="footermenu-container"></div>
</section>





<!-- ///////////////// -->
<!-- Sidebar -->
<!-- ///////////////// -->
<section>
<!-- Fullscreen Sidebar Trigger -->
<svg id="sidebarIcon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff">
    <path d="M86-191v-126h788v126H86Zm0-226v-126h788v126H86Zm0-226v-126h788v126H86Z"/>
</svg>

<!-- Sidebar container (empty, the content is injected here) -->
<div id="sidebar-container"></div>
</section>


<script>
window.onload = function() {
    // Load Sidebar
    fetch('sidebar.html')
        .then(response => response.text())
        .then(data => {
            const sidebarContainer = document.getElementById('sidebar-container');
            sidebarContainer.innerHTML = data;
            
            // Reattach event listeners after the sidebar is loaded
            const closeButton = document.getElementById("closeSidebarButton");
            if (closeButton) {
                closeButton.addEventListener("click", closeSidebar);
            }
			
			// Get references to the icon that triggers the sidebar opening
			const sidebarIcon = document.getElementById("sidebarIcon");

			// Function to open the sidebar
			function openSidebar() {
				const fullscreenSidebar = document.getElementById("fullscreenSidebar");
				fullscreenSidebar.style.transform = "translateX(0)";
			}

			// Function to close the sidebar
			function closeSidebar() {
				const fullscreenSidebar = document.getElementById("fullscreenSidebar");
				fullscreenSidebar.style.transform = "translateX(-100%)";
			}

			// Event listener for opening the sidebar when the icon is clicked
			sidebarIcon.addEventListener("click", openSidebar);
        })
        .catch(error => {
            console.error("Error loading sidebar:", error);
        });

    // Load Footer Menu
    fetch('footermenu.html')
        .then(response => response.text())
        .then(data => {
            const footerContainer = document.getElementById('footermenu-container');
            footerContainer.innerHTML = data;
        })
        .catch(error => {
            console.error("Error loading footer menu:", error);
        });
};
</script>



<!-- ///////////////// -->
<!-- Theme Toggle -->
<!-- ///////////////// -->
<section>
<button id="theme-toggle">
    <!-- Default dark icon (SVG) -->
    <svg id="dark-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
      <path d="M480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z"/>
    </svg>

    <!-- Light Icon (hidden by default) -->
    <svg id="light-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="display: none;">
      <path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z"/>
    </svg>
</button>
</section>

<!-- ///////////////// -->
<!-- Set Theme - Based on Local Storage -->
<!-- ///////////////// -->
<script>
  // Wait for the DOM to be fully loaded before running the script
  document.addEventListener("DOMContentLoaded", function() {
    const themeLink = document.createElement("link");
    themeLink.rel = "stylesheet";
    themeLink.id = "theme-link";
    
    // Check if a theme preference is saved in localStorage
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      themeLink.href = "dark-theme.css";  // If dark theme is saved, load dark-theme.css
    } else if (savedTheme === "light") {
      themeLink.href = "light-theme.css"; // If light theme is saved, load light-theme.css
    } else {
      themeLink.href = "dark-theme.css";  // Default to dark theme if no preference is saved
      localStorage.setItem('theme', 'dark');  // Save preference
    }

    // Append the theme <link> tag to the <head> of the document
    document.head.appendChild(themeLink);

    // Initialize icons based on saved theme preference
    const darkIcon = document.getElementById('dark-icon');
    const lightIcon = document.getElementById('light-icon');

    if (savedTheme === "dark") {
      lightIcon.style.display = 'none';
      darkIcon.style.display = 'block';
    } else {
      lightIcon.style.display = 'block';
      darkIcon.style.display = 'none';
    }

    // Toggle theme when button is clicked
    const themeToggleButton = document.getElementById('theme-toggle');

    themeToggleButton.addEventListener('click', () => {
      const currentTheme = themeLink.href.includes('dark-theme.css') ? 'dark' : 'light';
      if (currentTheme === 'dark') {
        themeLink.href = 'light-theme.css';  // Switch to light theme
        localStorage.setItem('theme', 'light');  // Save preference
        lightIcon.style.display = 'block';  // Show light icon
        darkIcon.style.display = 'none';   // Hide dark icon
      } else {
        themeLink.href = 'dark-theme.css';   // Switch to dark theme
        localStorage.setItem('theme', 'dark');  // Save preference
        lightIcon.style.display = 'none';   // Hide light icon
        darkIcon.style.display = 'block';   // Show dark icon
      }
    });
  });
</script>





</body>
</html>
