<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=overlays-content">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TKA - Dashboard</title>
  
	<!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" sizes="any">
    <meta name="theme-color" content="#1A1A1A">

    <!-- Link to the stylesheet -->
    <link rel="stylesheet" href="styles.css">
	
<style>
    .home-body-container {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #0f2027, #203a43, #2c5364);
      color: white;
      display: flex;
	  flex-direction: column;
	  gap: 5px;
      align-items: center;
      overflow: scroll;
      margin: 10px;
    }
	
	.home-widget-row {
		display: flex;
		flex-direction: row;
		gap: 5px;
		width: 100%;
		justify-content: center;
	}

    #home-widget-datetime {
      text-align: center;
      margin-bottom: 1rem;
	  margin-top: 1rem;
    }
    .home-greeting {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.1rem;
      color: #93c5fd;
      margin-bottom: 0.5rem;
      justify-content: center;
    }
    .home-greeting img {
      width: 24px;
      height: 24px;
    }
    .home-time {
      font-size: 2.8rem;
      font-weight: bold;
    }
    .home-date {
      font-size: 1.1rem;
      color: #cbd5e1;
    }

	.home-location-permission-btn {
		display: flex;
		align-items: center;
		gap: 5px;
		background: #00000080;
		color: white;
		border: none;
		padding: 6px 10px;
		border-radius: 30px;
		position: absolute;
		top: 5px;
		right: 5px;
	}
	
	#home-location-permission-icon {
		height: 20px;
		width: 20px;
	}
	
    .home-widget-card {
      min-width: 140px;
	  width: 100%;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 10px;
      text-align: left;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
	  position: relative;
	  
    }

    .home-widget-card h4 {
      margin: 0;
      font-weight: 500;
      color: #60a5fa;
      font-size: 0.9rem;
    }

    .home-widget-card p {
      margin: 0.4rem 0 0;
      font-size: 0.95rem;
    }


    #home-widget-moonphases, #home-widget-sunmoonduration {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    #home-moonphases-img{
      width: 50px;
      height: 50px;
      flex-shrink: 0;
    }
	
	#home-widget-sunmoonduration img {
		width: 30px;
		height: 30px;
		flex-shrink: 0;
	}

    #home-widget-sunmoonduration .times {
      font-size: 0.85rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

	.home-card-row {
		display: flex;
		flex-direction: column;
		gap: 5px;
		width: 100%;
		justify-content: center;
		align-items: center;
		background: #00000080;
		border-radius: 10px;
		padding: 4px;		
	}
	
    .home-quote {
		font-style: italic;
		font-size: 18px;
		color: #e0f2fe;
    }
	
	#home-battery-status {
		font-size: 1rem;
		margin-top: 5px;
	}
	

	#home-ram-status {
		font-size: 1rem;
		margin-top: 5px;
	}

	#home-network-display {
		display: flex;
		flex-direction: row;
		align-items: center;
	}

	#home-network-display img {
		width: 30px;
		height: 30px;
	}

	#home-network-label {
		font-size: 0.9rem;
		margin-top: 5px;
	}
	
	
	#home-event-display button {
		background: #00000080;
		border: none;
		border-radius: 30px;
		padding: 5px 15px;
	}
	
	#home-event-display button svg{
		fill: #60a5fa;
	}

	
	#home-event-date {
		font-size: 1.2rem;
		font-weight: bold;
	}
	
	#home-event-name {
		margin-top: 0.5rem;
		font-size: 1rem;
	}
	
	#home-event-desc {
		margin-top: 0.3rem;
		font-size: 0.85rem;
		color: #cbd5e1;
	}

	.home-event-nav-buttons {
		display: flex;
		justify-content: space-between;
		gap: 1rem;
		margin-top: 1rem;
	}
	
    .home-buttons {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		gap: 10px;
		padding: 10px 0px;
    }

    .home-pages {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-decoration: none;
		color: var(--font1);
		font-size: 10px;
		background: rgba(0,0,0,0.5);
		box-shadow: 0 4px 12px rgba(0,0,0,0.2);
		padding: 8px;
		border-radius: 8px;
		margin-bottom: 5px;
    }
	.home-pages-icons {
		width: 24px;
		height: 24px;
		fill: var(--accent1);
		margin: 5px;
	}
	
	.home-paragraph {
		color: white;
	}

</style>
</head>
<body class="home-body-container">
	<div class="home-widget-row">
		<!-- Widget: Date & Time -->
		<div id="home-widget-datetime" class="">
			<div class="home-greeting" id="home-greeting">
			  <img src="images/dashboard/day/morning.svg" alt="Greeting Icon">
			  <span>Good Morning</span>
			</div>
			<div class="home-time" id="home-time">--:-- --</div>
			<div class="home-date" id="home-date">-- ---- ----</div>
		</div>
	</div>
	<div class="home-widget-row">
		<!-- Widget: IP Address -->
		<div id="home-widget-ipaddress" class="home-widget-card">
		  <h4>Your IP</h4>
		  <p id="home-ip" class="home-paragraph">Loading...</p>
		</div>
		
		<!-- Widget: Location -->
		<div id="home-widget-location" class="home-widget-card">
			<h4>Location</h4>
			<p id="home-location" class="home-paragraph">Loading...</p>
			<button id="home-location-permission-btn" class="home-location-permission-btn">
				<svg id="home-location-permission-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#ffffff">
					<path d="M480-107q-14 0-28-5t-25-15q-65-60-115-117t-83.5-110.5q-33.5-53.5-51-103T160-552q0-32 5-61t14-55L55-792q-12-12-12-28.5T55-849q12-12 28.5-12t28.5 12l736 736q12 12 12 28.5T848-56q-12 12-28.5 12T791-56L627-220q-25 26-50 51.5T533-127q-11 10-25 15t-28 5Zm0-773q127 0 223.5 89T800-552q0 35-10 72.5T760-402q-11 22-35.5 24.5T683-392L551-524q5-8 7-17t2-19q0-17-6-31.5T537-617q-11-11-25.5-17t-31.5-6q-10 0-19 2t-17 7L315-760q-18-18-15.5-42.5T323-840q35-20 75-30t82-10Z"/>
				</svg>
				<span id="home-location-permission-status">off</span>
			</button>

		</div>
	</div>
	<div class="home-widget-row">
		<!-- Widget: Moon Phases -->
		<div id="home-widget-moonphases" class="home-widget-card">
		  <img id="home-moonphases-img" src="" alt="Moon Phase">
		  <div>
			<div id="home-moon-month">--</div>
			<div id="home-moon-phase"><strong>--</strong></div>
			<div id="home-moon-tithi" style="color: #cbd5e1;">--</div>
		  </div>
		</div>
		
		
		<!-- Widget: Sun Moon Duration -->
		<div id="home-widget-sunmoonduration" class="home-widget-card">
			<div class="home-card-row">
			<img class="home-sunduration-img" src="images/dashboard/day/sun-duration.png" alt="Sun">
			<div class="times">
				<div><span id="sunrise">--:-- am</span></div>
				<div><span id="sunset">--:-- pm</span></div>
			</div>
			</div>
			<div class="home-card-row">
			<img class="home-moonduration-img" src="images/dashboard/day/moon-duration.png" alt="Moon">
			<div class="times">
				<div><span id="moonrise">--:-- pm</span></div>
				<div><span id="moonset">--:-- am</span></div>
			</div>
			</div>
		</div>
	</div>
	
	<div class="home-widget-row">
		<!-- Widget: Battery Status -->
		<div id="home-widget-battery" class="home-widget-card">
			<h4>Battery</h4>
			<p id="home-battery-status" class="home-paragraph">Loading...</p>
		</div>

		<!-- Widget: RAM Status -->
		<div id="home-widget-ram" class="home-widget-card">
		  <h4>Device Memory</h4>
		  <p id="home-ram-status" class="home-paragraph">Loading...</p>
		</div>
	</div>
	
	<div class="home-widget-row">
		<!-- Widget: Network Status -->
		<div id="home-widget-network" class="home-widget-card">
			<h4>Network</h4>
			<div id="home-network-display">
				<img id="home-network-icon" src="images/dashboard/network/wifi.svg" alt="Network Icon">
				<p id="home-network-label" class="home-paragraph">Loading...</p>
			</div>
		</div>
		
	</div>
	<div class="home-widget-row">
		<!-- Widget: Quote of the Day -->
		<div id="home-widget-quote" class="home-quote home-widget-card">
			<h4>Quote for you:</h4>
			<span id="home-widget-quote-message">"Where there is a will, there is a way."</span>
		</div>
		
		<!-- Widget: Events -->
		<div id="home-widget-events" class="home-widget-card">
			<h4>Events</h4>

			<div id="home-event-display">
				<div id="home-event-date">--</div>
				<div id="home-event-name">--</div>
				<div id="home-event-desc">--</div>

				<div class="home-event-nav-buttons">
					<button id="home-event-prev">
						<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5985E1">
							<path d="M526-314 381-459q-5-5-7-10t-2-11q0-6 2-11t7-10l145-145q3-3 6.5-4.5t7.5-1.5q8 0 14 5.5t6 14.5v304q0 9-6 14.5t-14 5.5q-2 0-14-6Z"/>
						</svg>
					</button>
					<button id="home-event-next">
						<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5985E1">
							<path d="M420-308q-8 0-14-5.5t-6-14.5v-304q0-9 6-14.5t14-5.5q2 0 14 6l145 145q5 5 7 10t2 11q0 6-2 11t-7 10L434-314q-3 3-6.5 4.5T420-308Z"/>
						</svg>
					</button>
				</div>
			</div>
		</div>
	</div>
	



	
	

	
	<!-- ðŸ§­ Navigation Buttons -->
  <div class="home-buttons">
    <a class="home-pages" href="ved.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:DodgerBlue;">
				<path d="M520-278q44-21 88.5-31.5T700-320q36 0 70.5 6t69.5 18v-396q-33-14-68.5-21t-71.5-7q-47 0-93 12t-87 36v394Zm-40 97q-14 0-26.5-3.5T430-194q-39-23-82-34.5T260-240q-42 0-82.5 11T100-198q-21 11-40.5-1T40-234v-482q0-11 5.5-21T62-752q47-23 96.5-35.5T260-800q58 0 113.5 15T480-740q51-30 106.5-45T700-800q52 0 101.5 12.5T898-752q11 5 16.5 15t5.5 21v482q0 23-19.5 35t-40.5 1q-37-20-77.5-31T700-240q-45 0-88 11.5T530-194q-11 6-23.5 9.5T480-181Zm80-428q0-9 6.5-18.5T581-640q29-10 58-15t61-5q20 0 39.5 2.5T778-651q9 2 15.5 10t6.5 18q0 17-11 25t-28 4q-14-3-29.5-4.5T700-600q-26 0-51 5t-48 13q-18 7-29.5-1T560-609Zm0 220q0-9 6.5-18.5T581-420q29-10 58-15t61-5q20 0 39.5 2.5T778-431q9 2 15.5 10t6.5 18q0 17-11 25t-28 4q-14-3-29.5-4.5T700-380q-26 0-51 4.5T601-363q-18 7-29.5-.5T560-389Zm0-110q0-9 6.5-18.5T581-530q29-10 58-15t61-5q20 0 39.5 2.5T778-541q9 2 15.5 10t6.5 18q0 17-11 25t-28 4q-14-3-29.5-4.5T700-490q-26 0-51 5t-48 13q-18 7-29.5-1T560-499Z"/>
		</svg>
		Ved
	</a>
    <a class="home-pages" href="phonebook.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:olive;">
			<path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12Z"/>
		</svg>
		Calls
	</a>
    <a class="home-pages" href="indexeddb.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:cyan;">
			<path d="M160-240q-17 0-28.5-11.5T120-280q0-17 11.5-28.5T160-320h400q17 0 28.5 11.5T600-280q0 17-11.5 28.5T560-240H160Zm0-200q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h640q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H160Zm0-200q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h640q17 0 28.5 11.5T840-680q0 17-11.5 28.5T800-640H160Z"/>
		</svg>
		Notes
	</a>
	<a class="home-pages" href="nearme.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:magenta;">
			<path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 400Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Z"/>
		</svg>
		Near Me
	</a>
	<a class="home-pages" href="topsites.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:orange;">
			<path d="M480-118 120-398l66-50 294 228 294-228 66 50-360 280Zm0-202L120-600l360-280 360 280-360 280Z"/>
		</svg>
		Topsites
	</a>
	<a class="home-pages" href="siren.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:Crimson;">
			<path d="M240-160q-17 0-28.5-11.5T200-200q0-17 11.5-28.5T240-240h24l79-263q8-26 29.5-41.5T420-560h120q26 0 47.5 15.5T617-503l79 263h24q17 0 28.5 11.5T760-200q0 17-11.5 28.5T720-160H240Zm200-520v-120q0-17 11.5-28.5T480-840q17 0 28.5 11.5T520-800v120q0 17-11.5 28.5T480-640q-17 0-28.5-11.5T440-680Zm210 54 85-85q11-11 27.5-11.5T791-711q11 11 11 28t-11 28l-85 86q-12 12-28 12t-28-12q-12-12-12-28.5t12-28.5Zm110 186h120q17 0 28.5 11.5T920-400q0 17-11.5 28.5T880-360H760q-17 0-28.5-11.5T720-400q0-17 11.5-28.5T760-440ZM254-570l-85-85q-11-11-11.5-27.5T169-711q11-11 28-11t28 11l86 85q12 12 12 28t-12 28q-12 12-28.5 12T254-570ZM80-360q-17 0-28.5-11.5T40-400q0-17 11.5-28.5T80-440h120q17 0 28.5 11.5T240-400q0 17-11.5 28.5T200-360H80Z"/>
		</svg>
		Emergency
	</a>
	<a class="home-pages" href="#">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:GoldenRod;">
			<path d="M374-288q-128-17-211-70T80-480q0-83 115.5-141.5T480-680q169 0 284.5 58.5T880-480q0 56-54.5 101.5T681-307q-16 5-28.5-4.5T640-337q0-18 10.5-32t27.5-20q60-20 91-45.5t31-45.5q0-32-85.5-76T480-600q-149 0-234.5 44T160-480q0 24 51 57.5T356-372l-24-24q-11-11-11-28t11-28q11-11 28-11t28 11l104 104q12 12 12 28t-12 28L388-188q-11 11-27.5 11.5T332-188q-11-11-11.5-27.5T331-244l43-44Z"/>
		</svg>
		360
	</a>
	<a class="home-pages" href="hologram.html">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:blueviolet;">
			<path d="M480-40q-149 0-254.5-42.5T120-200q0-32 20-57.5t56-45.5l65 58q-24 8-42.5 20.5T200-200q0 26 81 53t199 27q118 0 199-27t81-53q0-12-18.5-24.5T699-245l65-58q36 20 56 45.5t20 57.5q0 75-105.5 117.5T480-40Zm0-160q-22 0-42.5-7.5T400-230L148-453q-13-11-20.5-27t-7.5-33v-80q0-17 6.5-33t19.5-27l252-235q17-16 38-24t44-8q23 0 44 8t38 24l252 235q13 11 19.5 27t6.5 33v80q0 17-7.5 33T812-453L560-230q-17 15-37.5 22.5T480-200ZM360-550q21 0 35.5-14.5T410-600q0-21-14.5-35.5T360-650q-21 0-35.5 14.5T310-600q0 21 14.5 35.5T360-550Zm50 54q43 21 90.5 13.5T584-522q34-29 44.5-73T618-678L410-496Zm70-174q21 0 35.5-14.5T530-720q0-21-14.5-35.5T480-770q-21 0-35.5 14.5T430-720q0 21 14.5 35.5T480-670Z"/>
		</svg>
		Hologram
	</a>
	<a class="home-pages" href="#">
		<svg class="home-pages-icons" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="fill:HotPink;">
			<path d="m426-330 195-125q14-9 14-25t-14-25L426-630q-15-10-30.5-1.5T380-605v250q0 18 15.5 26.5T426-330Zm54 250q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
		</svg>
		Videos
	</a>
  </div>

<script>
const locationBtn = document.getElementById('home-location-permission-btn');
const locationIcon = document.getElementById('home-location-permission-icon');
const locationStatus = document.getElementById('home-location-permission-status');

// Check initial permission state
navigator.permissions?.query({name: 'geolocation'}).then(permissionStatus => {
  updateButtonState(permissionStatus.state);
  permissionStatus.onchange = () => updateButtonState(permissionStatus.state);
});

function updateButtonState(state) {
  if (state === 'granted') {
    locationIcon.setAttribute('fill', '#75FB4C');
    locationIcon.innerHTML = '<path d="M480-107q-14 0-28-5t-25-15q-65-60-115-117t-83.5-110.5q-33.5-53.5-51-103T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 45-17.5 94.5t-51 103Q698-301 648-244T533-127q-11 10-25 15t-28 5Zm0-373q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Z"/>';
    locationStatus.textContent = ' On';
    locationBtn.classList.add('active');
	window.location.reload();
  } else {
    locationIcon.setAttribute('fill', '#ffffff');
    locationIcon.innerHTML = '<path d="M480-107q-14 0-28-5t-25-15q-65-60-115-117t-83.5-110.5q-33.5-53.5-51-103T160-552q0-32 5-61t14-55L55-792q-12-12-12-28.5T55-849q12-12 28.5-12t28.5 12l736 736q12 12 12 28.5T848-56q-12 12-28.5 12T791-56L627-220q-25 26-50 51.5T533-127q-11 10-25 15t-28 5Zm0-773q127 0 223.5 89T800-552q0 35-10 72.5T760-402q-11 22-35.5 24.5T683-392L551-524q5-8 7-17t2-19q0-17-6-31.5T537-617q-11-11-25.5-17t-31.5-6q-10 0-19 2t-17 7L315-760q-18-18-15.5-42.5T323-840q35-20 75-30t82-10Z"/>';
    locationStatus.textContent = ' Off';
    locationBtn.classList.remove('active');
  }
}

locationBtn.addEventListener('click', () => {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      () => updateButtonState('granted'),
      (error) => {
        if (error.code === error.PERMISSION_DENIED) {
          updateButtonState('denied');
        }
      }
    );
  } else {
    locationStatus.textContent = 'Geolocation not supported';
  }
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.9.0/suncalc.min.js"></script>
<script>
// Widget: Date Time
  function homeUpdateTimeGreeting() {
    try {
      const now = new Date();
      let hours = now.getHours();
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      const ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12 || 12;

      document.getElementById('home-time').textContent = `${hours}:${minutes}:${seconds} ${ampm}`;
      const options = { day: '2-digit', month: 'long', year: 'numeric' };
      document.getElementById('home-date').textContent = now.toLocaleDateString(undefined, options);

      const greeting = document.getElementById('home-greeting');
      const img = greeting.querySelector('img');
      const text = greeting.querySelector('span');

      let label = 'Good Night', imgSrc = 'night.svg';
      if (now.getHours() >= 5 && now.getHours() < 12) { label = 'Good Morning'; imgSrc = 'morning.svg'; }
      else if (now.getHours() >= 12 && now.getHours() < 17) { label = 'Good Afternoon'; imgSrc = 'afternoon.svg'; }
      else if (now.getHours() >= 17 && now.getHours() < 20) { label = 'Good Evening'; imgSrc = 'evening.svg'; }

      img.src = `images/dashboard/day/${imgSrc}`;
      text.textContent = label;
    } catch (err) {
      console.warn("homeUpdateTimeGreeting error:", err);
    }
  }
  setInterval(homeUpdateTimeGreeting, 1000);
  homeUpdateTimeGreeting();
</script>

<script>
// Widget: IP Address
function homeUpdateIPAddress() {
    try {
      fetch("https://api.ipify.org?format=json")
        .then(res => res.json())
        .then(data => {
          if (document.getElementById('home-ip')) {
            document.getElementById('home-ip').textContent = data.ip;
          }
        })
        .catch(() => {
          if (document.getElementById('home-ip')) {
            document.getElementById('home-ip').textContent = "Unavailable";
          }
        });
    } catch (err) {
      console.warn("homeUpdateIPAddress error:", err);
    }
  }
  homeUpdateIPAddress();
</script>


<script>
// Widget: Geo Location
  function homeUpdateLocation() {
    try {
      if ('geolocation' in navigator) {
        navigator.geolocation.getCurrentPosition(pos => {
          const { latitude, longitude } = pos.coords;
          if (document.getElementById('home-location')) {
            document.getElementById('home-location').innerHTML = `Lat: ${latitude.toFixed(4)}<br>Lng: ${longitude.toFixed(4)}`;
          }
          homeUpdateSunMoonTimes(latitude, longitude); // Pass location to SunMoonTimes
        }, () => {
          if (document.getElementById('home-location')) {
            document.getElementById('home-location').textContent = "Location Unavailable";
          }
          homeUpdateSunMoonTimes(); // Without location fallback
        });
      } else {
        if (document.getElementById('home-location')) {
          document.getElementById('home-location').textContent = "Geolocation not supported";
        }
        homeUpdateSunMoonTimes();
      }
    } catch (err) {
      console.warn("homeUpdateLocation error:", err);
    }
  }
  homeUpdateLocation();
</script>

<script>	
// Widget: Sun Moon Duration
if ('geolocation' in navigator) {
      navigator.geolocation.getCurrentPosition(pos => {
        const { latitude, longitude } = pos.coords;

        const times = SunCalc.getTimes(new Date(), latitude, longitude);
        document.getElementById('sunrise').textContent = times.sunrise.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        document.getElementById('sunset').textContent = times.sunset.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        document.getElementById('moonrise').textContent = times.moonrise.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        document.getElementById('moonset').textContent = times.moonset.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      });
    }
</script>

<script>
// Widget: Moon Phases
  function homeUpdateMoonPhase() {
    try {
      const moon = SunCalc.getMoonIllumination(new Date());
      let phase = moon.phase;
      let dayNum = Math.round(phase * 29.5);

      const tithis = ["Pratipada", "Dwitiya", "Tritiya", "Chaturthi", "Panchami", "Shashthi", "Saptami",
                      "Ashtami", "Navami", "Dashami", "Ekadashi", "Dwadashi", "Trayodashi", "Chaturdashi"];

      let paksha = "", tithi = "";
      if (dayNum === 0) { paksha = "Krishna"; tithi = "Amavasya"; }
      else if (dayNum === 15) { paksha = "Shukla"; tithi = "Purnima"; }
      else if (dayNum < 15) { paksha = "Shukla"; tithi = tithis[dayNum - 1]; }
      else { paksha = "Krishna"; tithi = tithis[dayNum - 16]; }

      const imgName = `images/dashboard/moon/${paksha.toLowerCase()}-${tithi.toLowerCase()}.webp`;

      if (document.getElementById('home-moonphases-img')) document.getElementById('home-moonphases-img').src = imgName;
      if (document.getElementById('home-moon-phase')) document.getElementById('home-moon-phase').textContent = paksha;
      if (document.getElementById('home-moon-tithi')) document.getElementById('home-moon-tithi').textContent = tithi;
    } catch (err) {
      console.warn("homeUpdateMoonPhase error:", err);
    }
  }
  homeUpdateMoonPhase();
  

// Function to get the current Hindu lunar month
function getHinduLunarMonth(date = new Date()) {
  // Hindu lunar months (Amanta system - starts after Amavasya)
  const hinduMonths = [
    "Chaitra", "Vaishakha", "Jyeshtha", "Ashadha",
    "Shravana", "Bhadrapada", "Ashwin", "Kartika",
    "Margashirsha", "Pausha", "Magha", "Phalguna"
  ];

  // Approximate Gregorian start dates for Hindu months (2024-2025)
  // Note: These vary slightly each year due to lunar cycles.
  const monthStartDates = [
    new Date(date.getFullYear(), 2, 22),   // Chaitra ~ March 22
    new Date(date.getFullYear(), 3, 21),   // Vaishakha ~ April 21
    new Date(date.getFullYear(), 4, 22),   // Jyeshtha ~ May 22
    new Date(date.getFullYear(), 5, 21),   // Ashadha ~ June 21
    new Date(date.getFullYear(), 6, 22),   // Shravana ~ July 22
    new Date(date.getFullYear(), 7, 22),   // Bhadrapada ~ August 22
    new Date(date.getFullYear(), 8, 23),   // Ashwin ~ September 23
    new Date(date.getFullYear(), 9, 23),   // Kartika ~ October 23
    new Date(date.getFullYear(), 10, 22),  // Margashirsha ~ November 22
    new Date(date.getFullYear(), 11, 22),  // Pausha ~ December 22
    new Date(date.getFullYear(), 0, 21),   // Magha ~ January 21
    new Date(date.getFullYear(), 1, 20)    // Phalguna ~ February 20
  ];

  // Find the current Hindu month
  for (let i = 0; i < monthStartDates.length; i++) {
    if (date < monthStartDates[i]) {
      return hinduMonths[(i - 1 + 12) % 12]; // Handle year wrap (Phalguna â†’ Chaitra)
    }
  }
  return hinduMonths[11]; // Default to Phalguna (Feb-March)
}

// Update the HTML with the Hindu month
function updateHinduMonth() {
  try {
    const today = new Date();
    const hinduMonth = getHinduLunarMonth(today);
    
    // Set the month in your HTML widget
    const monthElement = document.getElementById('home-moon-month');
    if (monthElement) {
      monthElement.innerHTML = `${hinduMonth}`;
    }
  } catch (err) {
    console.warn("updateHinduMonth error:", err);
  }
}

// Call the function to update the month
updateHinduMonth();
</script>	
	
	
	
<script>	
// Widget: Quote
  function homeUpdateQuote() {
    try {
      const quotes = [
        "Where there is a will, there is a way.",
        "Believe you can and you're halfway there.",
        "Dream big and dare to fail.",
        "Success is not final; failure is not fatal.",
        "Hard work beats talent when talent doesn't work hard."
      ];
      const randomIndex = Math.floor(Math.random() * quotes.length);
      if (document.getElementById('home-widget-quote-message')) {
        document.getElementById('home-widget-quote-message').textContent = quotes[randomIndex];
      }
    } catch (err) {
      console.warn("homeUpdateQuoteOfTheDay error:", err);
    }
  }
  homeUpdateQuote();
</script>


<script>
// Widget: Battery Status
function homeUpdateBatteryStatus() {
  try {
    if ('getBattery' in navigator) {
      navigator.getBattery().then(function(battery) {
        function updateAllBatteryInfo() {
          const level = Math.round(battery.level * 100) + "%";
          const charging = battery.charging ? "âš¡ Charging" : "ðŸ”‹ Battery";
          if (document.getElementById('home-battery-status')) {
            document.getElementById('home-battery-status').textContent = `${level} - ${charging}`;
          }
        }

        updateAllBatteryInfo();

        battery.addEventListener('chargingchange', updateAllBatteryInfo);
        battery.addEventListener('levelchange', updateAllBatteryInfo);
      });
    } else {
      document.getElementById('home-battery-status').textContent = "Battery API not supported.";
    }
  } catch (err) {
    console.warn("homeUpdateBatteryStatus error:", err);
  }
}
homeUpdateBatteryStatus();
</script>


<script>
// Widget: RAM Status
function homeUpdateRAMStatus() {
  try {
    if ('deviceMemory' in navigator) {
      const ram = navigator.deviceMemory; // in GB
      if (document.getElementById('home-ram-status')) {
        document.getElementById('home-ram-status').textContent = `${ram} GB Available`;
      }
    } else {
      document.getElementById('home-ram-status').textContent = "RAM Info not available.";
    }
  } catch (err) {
    console.warn("homeUpdateRAMStatus error:", err);
  }
}
homeUpdateRAMStatus();
</script>


<script>
// Widget: Network Status
function homeUpdateNetworkStatus() {
  try {
    if ('connection' in navigator) {
      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

      function updateConnectionIcon() {
        const type = connection.type || 'unknown';
        const icon = document.getElementById('home-network-icon');
        const label = document.getElementById('home-network-label');

        if (type === 'wifi') {
          icon.src = 'images/dashboard/network/wifi.svg';
          label.textContent = 'Wi-Fi';
        } else if (type === 'cellular') {
          icon.src = 'images/dashboard/network/cellular.svg';
          label.textContent = 'Cellular';
        } else {
          icon.src = 'images/dashboard/network/cellular.svg'; // fallback default
          label.textContent = 'Unknown';
        }
      }

      updateConnectionIcon();
      connection.addEventListener('change', updateConnectionIcon);

    } else {
      // Fallback if API not supported
      document.getElementById('home-network-label').textContent = "Unknown";
      document.getElementById('home-network-icon').src = "images/dashboard/network/cellular.svg";
    }
  } catch (err) {
    console.warn("homeUpdateNetworkStatus error:", err);
  }
}
homeUpdateNetworkStatus();
</script>


<script>
// Widget: Events (Upcoming Dates)
function homeUpdateEventsWidget() {
  try {
    const events = [
      { date: "January 4", name: "Perihelion", desc: "Closest to the Sun" },
      { date: "March 20", name: "March Equinox", desc: "Equal Day and Night" },
      { date: "June 5", name: "World Environment Day", desc: "Environmental Awareness" },
      { date: "June 21", name: "June Solstice", desc: "Longest Day (Northern Hemisphere)" },
      { date: "July 4", name: "Earth Aphelion", desc: "Farthest from the Sun" },
      { date: "September 22", name: "September Equinox", desc: "Equal Day and Night" },
      { date: "December 21", name: "December Solstice", desc: "Shortest Day (Northern Hemisphere)" },
      { date: "June 21", name: "International Day of Yoga", desc: "Global Yoga Celebration" }
    ];

    // Helper: Convert MM-DD to comparable number
    function getComparable(dateString) {
      const parts = dateString.split(' ');
      const month = new Date(parts[0] + " 1, 2000").getMonth() + 1; // e.g., June => 6
      const day = parseInt(parts[1]);
      return month * 100 + day;
    }

    const today = new Date();
    const todayComparable = (today.getMonth() + 1) * 100 + today.getDate();

    // Find next event (or today)
    let startIndex = events.findIndex(event => getComparable(event.date) >= todayComparable);
    if (startIndex === -1) startIndex = 0; // If all passed, start from first

    let currentIndex = startIndex;

    const dateEl = document.getElementById('home-event-date');
    const nameEl = document.getElementById('home-event-name');
    const descEl = document.getElementById('home-event-desc');

    function showEvent(index) {
      const e = events[index];
      dateEl.textContent = e.date;
      nameEl.textContent = e.name;
      descEl.textContent = e.desc;
    }

    document.getElementById('home-event-prev').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + events.length) % events.length;
      showEvent(currentIndex);
    });

    document.getElementById('home-event-next').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % events.length;
      showEvent(currentIndex);
    });

    // Initialize display
    showEvent(currentIndex);

  } catch (err) {
    console.warn("homeUpdateEventsWidget error:", err);
  }
}
homeUpdateEventsWidget();
</script>








<!-- ///////////////// -->
<!-- Theme Toggle -->
<!-- ///////////////// -->
<section>
<button id="theme-toggle">
    <!-- Default dark icon (SVG) -->
    <svg id="dark-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
      <path d="M480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z"/>
    </svg>

    <!-- Light Icon (hidden by default) -->
    <svg id="light-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="display: none;">
      <path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z"/>
    </svg>
</button>
</section>

<!-- ///////////////// -->
<!-- Set Theme - Based on Local Storage -->
<!-- ///////////////// -->
<script>
  // Wait for the DOM to be fully loaded before running the script
  document.addEventListener("DOMContentLoaded", function() {
    const themeLink = document.createElement("link");
    themeLink.rel = "stylesheet";
    themeLink.id = "theme-link";
    
    // Check if a theme preference is saved in localStorage
    const savedTheme = localStorage.getItem("theme");

    if (savedTheme === "dark") {
      themeLink.href = "dark-theme.css";  // If dark theme is saved, load dark-theme.css
    } else if (savedTheme === "light") {
      themeLink.href = "light-theme.css"; // If light theme is saved, load light-theme.css
    } else {
      themeLink.href = "dark-theme.css";  // Default to dark theme if no preference is saved
      localStorage.setItem('theme', 'dark');  // Save preference
    }

    // Append the theme <link> tag to the <head> of the document
    document.head.appendChild(themeLink);

    // Initialize icons based on saved theme preference
    const darkIcon = document.getElementById('dark-icon');
    const lightIcon = document.getElementById('light-icon');

    if (savedTheme === "dark") {
      lightIcon.style.display = 'none';
      darkIcon.style.display = 'block';
    } else {
      lightIcon.style.display = 'block';
      darkIcon.style.display = 'none';
    }

    // Toggle theme when button is clicked
    const themeToggleButton = document.getElementById('theme-toggle');

    themeToggleButton.addEventListener('click', () => {
      const currentTheme = themeLink.href.includes('dark-theme.css') ? 'dark' : 'light';
      if (currentTheme === 'dark') {
        themeLink.href = 'light-theme.css';  // Switch to light theme
        localStorage.setItem('theme', 'light');  // Save preference
        lightIcon.style.display = 'block';  // Show light icon
        darkIcon.style.display = 'none';   // Hide dark icon
      } else {
        themeLink.href = 'dark-theme.css';   // Switch to dark theme
        localStorage.setItem('theme', 'dark');  // Save preference
        lightIcon.style.display = 'none';   // Hide light icon
        darkIcon.style.display = 'block';   // Show dark icon
      }
    });
  });
</script>




<!-- ///////////////// -->
<!-- Footer Spacer -->
<!-- ///////////////// -->
<div class="footerSpacer">
</div>


<!-- ///////////////// -->
<!-- Fullscreen Toggle -->
<!-- ///////////////// -->
<section>
  <button id="fullscreen-toggle" class="fullscreen-button">
  <!-- Icon for entering fullscreen (initially displayed) -->
  <svg id="fullscreen-enter-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f">
    <path d="M86-86v-260h126v134h134v126H86Zm529 0v-126h133v-134h126v260H615ZM86-615v-259h260v126H212v133H86Zm662 0v-133H615v-126h259v259H748Z"/>
  </svg>

  <!-- Icon for exiting fullscreen (hidden initially) -->
  <svg id="fullscreen-exit-icon" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f" style="display: none;">
    <path d="M220-86v-134H86v-126h260v260H220Zm395 0v-260h259v126H741v134H615ZM86-615v-126h134v-133h126v259H86Zm529 0v-259h126v133h133v126H615Z"/>
  </svg>
</button>
</section>
<script>
  // Fullscreen Toggle Logic
const fullscreenButton = document.getElementById('fullscreen-toggle');
fullscreenButton.addEventListener('click', () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
    document.getElementById('fullscreen-enter-icon').style.display = 'none';
    document.getElementById('fullscreen-exit-icon').style.display = 'block';
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
      document.getElementById('fullscreen-enter-icon').style.display = 'block';
      document.getElementById('fullscreen-exit-icon').style.display = 'none';
    }
  }
});

</script>


<!-- ///////////////// -->
<!-- Prevent Right Click Context Menu -->
<!-- ///////////////// -->
<script>
  // Prevent the context menu from appearing on right-click
  document.addEventListener('contextmenu', function(event) {
	event.preventDefault(); // Prevent the context menu from appearing
  });
</script>

</body>
</html>
